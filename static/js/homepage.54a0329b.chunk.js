(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[2],{108:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return O}));var r=n(0),i=n.n(r),s=n(2),o=n(6),a=n(1),u=n(7),c=n(14),l=function(t){function e(e,n){var r;return(r=t.call(this)||this).client=e,r.options=n,r.initialDataUpdateCount=0,r.initialErrorUpdateCount=0,r.trackedProps=[],r.bindMethods(),r.setOptions(n),r}Object(o.a)(e,t);var n=e.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){1===this.listeners.length&&(this.updateQuery(),this.currentQuery.addObserver(this),this.willFetchOnMount()&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.willLoadOnMount=function(){return!1!==this.options.enabled&&!this.currentQuery.state.dataUpdatedAt&&!("error"===this.currentQuery.state.status&&!1===this.options.retryOnMount)},n.willRefetchOnMount=function(){return!1!==this.options.enabled&&this.currentQuery.state.dataUpdatedAt>0&&("always"===this.options.refetchOnMount||!1!==this.options.refetchOnMount&&this.isStale())},n.willFetchOnMount=function(){return this.willLoadOnMount()||this.willRefetchOnMount()},n.willFetchOnReconnect=function(){return!1!==this.options.enabled&&("always"===this.options.refetchOnReconnect||!1!==this.options.refetchOnReconnect&&this.isStale())},n.willFetchOnWindowFocus=function(){return!1!==this.options.enabled&&("always"===this.options.refetchOnWindowFocus||!1!==this.options.refetchOnWindowFocus&&this.isStale())},n.willFetchOptionally=function(){return!1!==this.options.enabled&&this.isStale()},n.isStale=function(){return this.currentQuery.isStaleByTime(this.options.staleTime)},n.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},n.setOptions=function(t){var e=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(t),"undefined"!==typeof this.options.enabled&&"boolean"!==typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");if(this.options.queryKey||(this.options.queryKey=e.queryKey),this.updateQuery(),this.listeners.length){if(this.currentQuery!==n)return this.optionalFetch(),void this.updateTimers();!1!==this.options.enabled&&!1===e.enabled&&this.optionalFetch(),this.options.enabled===e.enabled&&this.options.staleTime===e.staleTime||this.updateStaleTimeout(),this.options.enabled===e.enabled&&this.options.refetchInterval===e.refetchInterval||this.updateRefetchInterval()}},n.getCurrentResult=function(){return this.currentResult},n.getTrackedCurrentResult=function(){return this.trackedCurrentResult},n.getNextResult=function(t){var e=this;return new Promise((function(n,r){var i=e.subscribe((function(e){e.isFetching||(i(),e.isError&&(null==t?void 0:t.throwOnError)?r(e.error):n(e))}))}))},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(t){return this.fetch(t)},n.fetch=function(t){var e=this;return this.executeFetch(t).then((function(){return e.updateResult(),e.currentResult}))},n.optionalFetch=function(){this.willFetchOptionally()&&this.executeFetch()},n.executeFetch=function(t){this.updateQuery();var e=this.currentQuery.fetch(this.options,t);return(null==t?void 0:t.throwOnError)||(e=e.catch(a.i)),e},n.updateStaleTimeout=function(){var t=this;if(this.clearStaleTimeout(),!a.f&&!this.currentResult.isStale&&Object(a.g)(this.options.staleTime)){var e=Object(a.q)(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout((function(){if(!t.currentResult.isStale){var e=t.currentResult;t.updateResult(),t.notify({listeners:t.shouldNotifyListeners(e,t.currentResult),cache:!0})}}),e)}},n.updateRefetchInterval=function(){var t=this;this.clearRefetchInterval(),!a.f&&!1!==this.options.enabled&&Object(a.g)(this.options.refetchInterval)&&(this.refetchIntervalId=setInterval((function(){(t.options.refetchIntervalInBackground||c.a.isFocused())&&t.executeFetch()}),this.options.refetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval()},n.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},n.clearStaleTimeout=function(){clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0},n.clearRefetchInterval=function(){clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0},n.getNewResult=function(t){var e,n,r=this.currentQuery.state,i=r.isFetching,o=r.status,u=!1,c=!1,l=r.dataUpdatedAt;if(t&&(i=!0,l||(o="loading")),this.options.keepPreviousData&&!r.dataUpdateCount&&(null==(e=this.previousQueryResult)?void 0:e.isSuccess)&&"error"!==o)n=this.previousQueryResult.data,l=this.previousQueryResult.dataUpdatedAt,o=this.previousQueryResult.status,u=!0;else if(this.options.select&&"undefined"!==typeof r.data){var h,d;if(this.currentResult&&r.data===(null==(h=this.currentResultState)?void 0:h.data))n=this.currentResult.data;else if(n=this.options.select(r.data),!1!==this.options.structuralSharing)n=Object(a.m)(null==(d=this.currentResult)?void 0:d.data,n)}else n=r.data;if("undefined"!==typeof this.options.placeholderData&&"undefined"===typeof n&&"loading"===o){var p="function"===typeof this.options.placeholderData?this.options.placeholderData():this.options.placeholderData;"undefined"!==typeof p&&(o="success",n=p,c=!0)}return Object(s.a)({},Object(a.d)(o),{data:n,dataUpdatedAt:l,error:r.error,errorUpdatedAt:r.errorUpdatedAt,failureCount:r.fetchFailureCount,isFetched:r.dataUpdateCount>0||r.errorUpdateCount>0,isFetchedAfterMount:r.dataUpdateCount>this.initialDataUpdateCount||r.errorUpdateCount>this.initialErrorUpdateCount,isFetching:i,isLoadingError:"error"===o&&0===r.dataUpdatedAt,isPlaceholderData:c,isPreviousData:u,isRefetchError:"error"===o&&0!==r.dataUpdatedAt,isStale:this.isStale(),refetch:this.refetch,remove:this.remove})},n.shouldNotifyListeners=function(t,e){var n=this,r=this.options,i=r.notifyOnChangeProps,s=r.notifyOnChangePropsExclusions;if(t===e)return!1;if(!i&&!s)return!0;for(var o=Object.keys(e),a="tracked"===i?this.trackedProps:i,u=function(r){var u=o[r],c=t[u]!==e[u],l=null==a?void 0:a.some((function(t){return t===u})),h=null==s?void 0:s.some((function(t){return t===u}));if(c){if(s&&h)return"continue";if(!i||l||"tracked"===i&&0===n.trackedProps.length)return{v:!0}}},c=0;c<o.length;c++){var l=u(c);if("continue"!==l&&"object"===typeof l)return l.v}return!1},n.updateResult=function(t){var e=this,n=this.getNewResult(t);if(this.currentResultState=this.currentQuery.state,!Object(a.o)(n,this.currentResult)&&(this.currentResult=n,"tracked"===this.options.notifyOnChangeProps)){this.trackedCurrentResult={},Object.keys(n).forEach((function(t){Object.defineProperty(e.trackedCurrentResult,t,{configurable:!1,enumerable:!0,get:function(){var r;return r=t,e.trackedProps.includes(r)||e.trackedProps.push(r),n[t]}})}))}},n.updateQuery=function(){var t=this.currentQuery,e=this.client.getQueryCache().build(this.client,this.options);if(e!==t){this.previousQueryResult=this.currentResult,this.currentQuery=e,this.initialDataUpdateCount=e.state.dataUpdateCount,this.initialErrorUpdateCount=e.state.errorUpdateCount;var n=t?this.willFetchOptionally():this.willFetchOnMount();this.updateResult(n),this.hasListeners()&&(null==t||t.removeObserver(this),this.currentQuery.addObserver(this),this.shouldNotifyListeners(this.previousQueryResult,this.currentResult)&&this.notify({listeners:!0}))}},n.onQueryUpdate=function(t){var e=this.currentResult;this.updateResult();var n=this.currentResult;if(this.updateTimers(),e!==n){var r={};"success"===t.type?r.onSuccess=!0:"error"===t.type&&(r.onError=!0),this.shouldNotifyListeners(e,n)&&(r.listeners=!0),this.notify(r)}},n.notify=function(t){var e=this;u.a.batch((function(){t.onSuccess?(null==e.options.onSuccess||e.options.onSuccess(e.currentResult.data),null==e.options.onSettled||e.options.onSettled(e.currentResult.data,null)):t.onError&&(null==e.options.onError||e.options.onError(e.currentResult.error),null==e.options.onSettled||e.options.onSettled(void 0,e.currentResult.error)),t.listeners&&e.listeners.forEach((function(t){t(e.currentResult)})),t.cache&&e.client.getQueryCache().notify(e.currentQuery)}))},e}(n(10).a);function h(){var t=!1;return{clearReset:function(){t=!1},reset:function(){t=!0},isReset:function(){return t}}}var d=i.a.createContext(h()),p=n(59);function f(t,e){var n=Object(p.b)(),r=i.a.useContext(d),s=n.defaultQueryObserverOptions(t);s.onError&&(s.onError=u.a.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=u.a.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=u.a.batchCalls(s.onSettled)),s.suspense&&("number"!==typeof s.staleTime&&(s.staleTime=1e3),r.isReset()||(s.retryOnMount=!1));var o=i.a.useRef(),a=o.current||new e(n,s);o.current=a,a.hasListeners()&&a.setOptions(s);var c=a.getCurrentResult(),l=i.a.useState(c)[1];if(i.a.useEffect((function(){return r.clearReset(),a.subscribe(u.a.batchCalls(l))}),[a,r]),a.options.suspense||a.options.useErrorBoundary){if(a.options.suspense&&c.isLoading){r.clearReset();var h=a.subscribe();throw a.refetch().finally(h)}if(c.isError)throw c.error}return"tracked"===a.options.notifyOnChangeProps?a.getTrackedCurrentResult():c}var v=n(63),y=n(16),b=n.n(y),m=n(67),g=n(3);function O(){var t,e,n,r=(t="popularMovies",e=v.e,f(Object(a.k)(t,e,n),l)),i=r.status,s=r.data,o=r.error;return"loading"===i?Object(g.jsx)(b.a,{}):"error"===i?Object(g.jsxs)("span",{children:["Error: ",o.message]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{style:{textAlign:"center"},children:"Popular movies this week:"}),"success"===i&&Object(g.jsx)(m.a,{moviesArr:s.results})]})}},63:function(t,e,n){"use strict";n.d(e,"e",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return f})),n.d(e,"d",(function(){return y})),n.d(e,"a",(function(){return m}));var r=n(68),i=n.n(r),s=n(69),o=n(70),a=n.n(o),u="2bd63387ebd1c73ba3770ca5b24c8e07",c="https://api.themoviedb.org/3/";function l(){return h.apply(this,arguments)}function h(){return(h=Object(s.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.get("".concat(c,"trending/movie/week?api_key=").concat(u)).then((function(t){return t.data})).catch((function(t){return console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(t){return p.apply(this,arguments)}function p(){return(p=Object(s.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.get("".concat(c,"movie/").concat(e,"?api_key=").concat(u,"&language=en-US")).then((function(t){return t.data})).catch((function(t){return console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(t){return v.apply(this,arguments)}function v(){return(v=Object(s.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.get("".concat(c,"movie/").concat(e,"/credits?api_key=").concat(u,"&language=en-US")).then((function(t){return t.data})).catch((function(t){return console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t){return b.apply(this,arguments)}function b(){return(b=Object(s.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.get("".concat(c,"movie/").concat(e,"/reviews?api_key=").concat(u,"&language=en-US")).then((function(t){return t.data})).catch((function(t){return console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(t,e){return g.apply(this,arguments)}function g(){return(g=Object(s.a)(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.get("".concat(c,"search/movie?api_key=").concat(u,"&language=en-US&page=").concat(n,"&query=").concat(e)).then((function(t){return t.data})).catch((function(t){return console.log(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},66:function(t,e,n){t.exports={list:"MoviesList_list__1T_Yj",listItem:"MoviesList_listItem__2mA8H",listImg:"MoviesList_listImg__28Rdt",listLink:"MoviesList_listLink__1NeuC"}},67:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n(0);var r=n(5),i=n(11),s=n(66),o=n.n(s),a=n(3);function u(t){var e=t.moviesArr,n=t.url,s=void 0===n?"/movies":n,u=Object(r.g)();return Object(a.jsx)("ul",{className:o.a.list,children:e.map((function(t){return Object(a.jsx)("li",{className:o.a.listItem,children:Object(a.jsxs)(i.b,{className:o.a.listLink,to:{pathname:"".concat(s,"/").concat(t.id),state:{from:u}},children:[Object(a.jsx)("img",{className:o.a.listImg,src:"https://image.tmdb.org/t/p/w342/".concat(t.poster_path),alt:t.original_title,onError:function(t){"/imgNotFound.png"!==t.target.src&&(t.target.src="/imgNotFound.png")}}),Object(a.jsx)("p",{children:t.title})]})},t.id)}))})}}}]);
//# sourceMappingURL=homepage.54a0329b.chunk.js.map